{% extends "base.html" %}
{% block title %}Admin - Usuários{% endblock %}
{% block content %}
<h1>Usuários</h1>
<h2>Criar novo usuário</h2>
<form method="post">
  <label>Usuário</label>
  <input type="text" name="username" required>
  <label>Senha</label>
  <input type="password" name="password" required>
  <label><input type="checkbox" name="is_admin"> Administrador</label>
  <div style="margin-top:12px;">
    <button class="btn" type="submit">Criar</button>
  </div>
</form>

<h2>Lista</h2>
<table class="table">
  <tr><th>ID</th><th>Usuário</th><th>Admin</th><th>Ações</th></tr>
  {% for u in users %}
  <tr>
    <td>{{ u.id }}</td>
    <td>{{ u.username }}</td>
    <td>{{ 'Sim' if u.is_admin else 'Não' }}</td>
    <td>
      <form method="post" action="{{ url_for('admin_toggle_admin', user_id=u.id) }}" style="display:inline;" onsubmit="return confirm('Alternar admin?');">
        <button class="btn secondary" type="submit">Alternar Admin</button>
      </form>
      <a class="btn" href="{{ url_for('admin_reset_password', user_id=u.id) }}">Resetar senha</a>
    </td>
  </tr>
  {% endfor %}
</table>

<p><a class="btn secondary" href="{{ url_for('admin_home') }}">Voltar</a></p>
{% endblock %}
